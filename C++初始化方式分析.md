# C++初始化方式分析

创建对象时，需要区分`()`和`{}`。一般来说，指定初始化的方式包括**小括号，等号和大括号**。
例如:
```C++
Shit x(0);
Shit y = 0;
Shit z {0};
```
这三种是初始化方式，注意第二种不是赋值，而是**初始化**。
注意区分赋值和初始化，因为赋值会调用`operator=()`函数，而`Shit x = y`会调用拷贝构造函数。

Traditional C++中没有统一的初始化方式，而C++中引入了统一的初始化方式：单一的、概念上可以应用到一切场合的大括号初始化。

给类中的非static成员变量指定默认值，只能通过“=”或者“{}”的方式。而，不可复制对象只能用“{}”和“()”。

另外，大括号还有一种特性就是可以禁止build-in类型之间narrowing conversion。

如果使用{}的方式来初始化，那么会最优先调用形参为intializer_list的constructor。如果实在匹配不到，才会去匹配其他constructor。

总结一下：
- 在三种初始化方式中，大括号初始化应用最为广泛，可以组织narrowing conversion，避免一些奇怪的语法
- 在选择constructor的时候，只要有任何可能，大括号初始化一定会选择std::initializer_list的形参
- 使用大括号和小括号，会导致不同的结果。例如std::vector
- 模板内容进行对象构建时，没有完美的初始化方式。选择小括号和大括号都有其优缺点